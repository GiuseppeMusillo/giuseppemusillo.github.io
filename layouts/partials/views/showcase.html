{{ $item := .item }}

{{ $link := $item.RelPermalink }}
{{ $target := "" }}
{{ if $item.Params.external_link }}
  {{ $link = $item.Params.external_link }}
  {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
{{ end }}

<div class="card-simple view-showcase" style="width: 100%; max-width: 540px; margin: 0 auto;">

  {{ $resource := ($item.Resources.ByType "image").GetMatch "*featured*" }}
  {{ with $resource }}
    {{ $image := .Resize "540x webp" }}
    <a href="{{ $link }}" {{ $target }} aria-label="{{ $item.Title }}">
      <img src="{{ $image.RelPermalink }}" alt="{{ $item.Title }}" width="{{ $image.Width }}" height="{{ $image.Height }}"
           class="article-banner" loading="lazy" style="width: 100%; height: 200px; object-fit: cover;">
    </a>
  {{ end }}

  <div class="section-subheading article-title mb-1 mt-3">
    <a href="{{ $link }}" {{ $target }}>{{ $item.Title }}</a>
  </div>

  {{ with $item.Params.authors }}
  <div class="article-metadata">
    <strong>Authors:</strong>
    {{ range $index, $author := . }}
      {{ if $index }}, {{ end }}
      {{- if eq $author "admin" -}}
        Giuseppe Musillo
      {{- else -}}
        {{- $author -}}
      {{- end -}}
    {{ end }}
  </div>
  {{ end }}

  {{ if .show_summary }}
    {{ if $item.Params.summary }}
      <p class="article-summary">
        {{ $item.Params.summary | truncate 250 | plainify | emojify }}
      </p>
    {{ else if $item.Summary }}
      <p class="article-summary">
        {{ $item.Summary | truncate 250 | plainify | emojify }}
      </p>
    {{ end }}
  {{ end }}

  {{ if $item.Params.links }}
    <div class="btn-links">
      {{ range $item.Params.links }}
        <a class="btn btn-outline-primary btn-page-header btn-sm" href="{{ .url }}" target="_blank" rel="noopener">
          {{ .name }}
        </a>
      {{ end }}
    </div>
  {{ end }}

</div>
